<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Estoque</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Relatório de Estoque</h1>
    </header>

    <main>
        <label for="filtroData">Filtrar por:</label>
        <select id="filtroData">
            <option value="atual">Estoque Atual</option>
            <option value="diario">Diário</option>
            <option value="semanal">Semanal</option>
            <option value="mensal">Mensal</option>
            <option value="anual">Anual</option>
        </select>
        <button onclick="gerarRelatorio()">Gerar Relatório</button>

        <table id="relatorioTabela">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Descrição</th>
                    <th>Categoria</th>
                    <th>Quantidade</th>
                    <th>Unidade</th>
                    <th>Valor</th>
                    <th>Data Cadastro</th>
                </tr>
            </thead>
            <tbody id="relatorioLista">
                <!-- Os dados filtrados serão exibidos aqui -->
            </tbody>
        </table>
    </main>

    <script>
        // Função para gerar o relatório com base no filtro selecionado
        function gerarRelatorio() {
            const filtro = document.getElementById('filtroData').value;
            const estoque = JSON.parse(localStorage.getItem('estoque')) || []; // Recuperar os dados do localStorage
            const tabelaBody = document.getElementById('relatorioLista');
            tabelaBody.innerHTML = ''; // Limpar tabela antes de preencher
            
            if (estoque.length === 0) {
                tabelaBody.innerHTML = '<tr><td colspan="7">Nenhum item no estoque.</td></tr>';
                return;
            }

            const hoje = new Date();
            let itensFiltrados = estoque.filter(item => {
                const dataCadastro = new Date(item.dataCadastro);
                
                switch (filtro) {
                    case 'diario':
                        return dataCadastro.toDateString() === hoje.toDateString();
                    case 'semanal':
                        const umaSemanaAtras = new Date();
                        umaSemanaAtras.setDate(hoje.getDate() - 7);
                        return dataCadastro >= umaSemanaAtras;
                    case 'mensal':
                        return dataCadastro.getMonth() === hoje.getMonth() && dataCadastro.getFullYear() === hoje.getFullYear();
                    case 'anual':
                        return dataCadastro.getFullYear() === hoje.getFullYear();
                    case 'atual':
                    default:
                        return true; // Mostrar todos os itens
                }
            });

            if (itensFiltrados.length === 0) {
                tabelaBody.innerHTML = '<tr><td colspan="7">Nenhum item encontrado para esse período.</td></tr>';
                return;
            }

            // Preencher tabela com os itens filtrados
            itensFiltrados.forEach(item => {
                const linha = document.createElement('tr');
                linha.innerHTML = `
                    <td>${item.item}</td>
                    <td>${item.descricao}</td>
                    <td>${item.categoria}</td>
                    <td>${item.quantidade}</td>
                    <td>${item.unidade}</td>
                    <td>${item.valor}</td>
                    <td>${item.dataCadastro}</td>
                `;
                tabelaBody.appendChild(linha);
            });
        }
    </script>
</body>
</html>

